<!DOCTYPE html>
<html id="html" class="html">
  <head lang="en_GB">
  <meta charset="utf-8" />
  <title data-react-helmet="true">qryq - Brendan Graetz</title>
  <meta data-react-helmet="true" name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, minimum-scale=1.0"/><meta data-react-helmet="true" name="og:ttl" content="600"/><meta data-react-helmet="true" name="og:site_name" content="Brendan Graetz"/><meta data-react-helmet="true" name="og:description" content="The blog that Brendan writes"/><meta data-react-helmet="true" name="og:locale" content="en_GB"/><meta data-react-helmet="true" name="og:title" content="qryq - Brendan Graetz"/><meta data-react-helmet="true" name="og:url" content="http://blog.bguiz.com/2013/07/05/qryq/"/><meta data-react-helmet="true" name="og:image" content="http://blog.bguiz.com/images/logo-400px.png"/><meta data-react-helmet="true" name="og:type" content="article"/>
  <link data-react-helmet="true" rel="canonical" content="http://blog.bguiz.com/2013/07/05/qryq/"/>
</head>
  <body>
    <div id="outlet" class="outlet">
      <div id="root-page" class="root-page"><noscript></noscript><div id="navbar" class="navbar__navbar___3unxB"><ul id="navbar-list" class="navbar__navbar-list___33l7N"><li class="navbar__navbar-item___bZsgu"><a class="fa fa-home" title="Brendan Graetz" href="/"></a></li><li class="navbar__navbar-item___bZsgu"><a class="fa fa-files-o" title="Archives" href="/archives"></a></li><li class="navbar__navbar-item___bZsgu"><a class="fa fa-television" title="Presentations" href="/presentations"></a></li><li class="navbar__navbar-item___bZsgu"><a class="fa fa-book" title="Books" href="/books"></a></li><li class="navbar__navbar-item___bZsgu"><a href="https://twitter.com/bguiz" class="fa fa-twitter" title="@bguiz on Twitter"></a></li><li class="navbar__navbar-item___bZsgu"><a href="https://github.com/bguiz" class="fa fa-github" title="bguiz on github"></a></li><li class="navbar__navbar-item___bZsgu"><a href="http://stackoverflow.com/users/194982/bguiz" class="fa fa-stack-overflow" title="bguiz on stackoverflow"></a></li><li class="navbar__navbar-item___bZsgu"><a href="http://linkedin.com/in/brendangraetz/" class="fa fa-linkedin" title="Brendan Graetz on LinkedIn"></a></li><li class="navbar__navbar-item___bZsgu"><a href="http://reddit.com/u/bguiz" class="fa fa-reddit-alien" title="/u/bguiz on Reddit"></a></li><li class="navbar__navbar-item___bZsgu"><a href="https://plus.google.com/112370545733832378774?rel=author" class="fa fa-google-plus" title="@bguiz on Google+"></a></li></ul></div><div id="root-content" class="root-content"><div id="page-post" class="page page-post"><noscript></noscript><h1 id="page-title" class="page-title post-page__page-title___2KPKG">qryq</h1><div id="page-body" class="page-body"><div class="post-page__post-date___3HkPG">2013/07/05</div><span class="markdown__markdown-render___9BIqe"><p><h2 id="pronunciation">Pronunciation</h2></p>
<p><p><code>/ˈkwərik/</code></p></p>
<p><h2 id="what-it-is">What it is</h2></p>
<p><p><code>qryq</code> is a NodeJs library that allows one to express a series of API queries and define the dependencies between them. These queries may be executed in parallel, in sequence, or in a directed acyclic graph.</p></p>
<p><p>Despite being non-RESTful, this makes code more readable and composable, and affords a number of benefits.</p></p>
<p><h2 id="benefits">Benefits</h2></p>
<p><ul><li>Allows the programmer to state client-server interactions <strong>declaratively</strong>, and thus avoid both callback spaghetti code and promise spaghetti code.</li></p>
<p><li>A reduction in total <strong>bandwidth</strong> and <strong>latency</strong>.</li></p>
<p><li>A reduction in <strong>duplication of business logic</strong> on the client and the server.</li></p>
<p><li>A treatment of <strong>several queries as an atomic unit</strong>, makes it easier to write asynchronous user interfaces.</li>
</ul><h2 id="example">Example</h2></p>
<p><pre><code>    [
      {“id”:”qGeocodeOrigin”,”depends”:[],”api”:”gmapsGeoLookup”,”qry”:{“address”:”36 Meadow Wood Walk, Narre Warren VIC 3805”}},
      {“id”:”qGeocodeDestination”,”depends”:[],”api”:”gmapsGeoLookup”,”qry”:{“address”:”19 Bourke Street, Melbourne, VIC 3000”}},
      {“id”:”qScore”,”depends”:[“qGeocodeOrigin”,”qGeocodeDestination”],”api”:”score”,”qry”:{
          “origin”:{“address”:”36 Meadow Wood Walk, Narre Warren VIC 3805”,”lat”:”#{qGeocodeOrigin}.lat”,”lon”:”#{qGeocodeOrigin}.lon”},
          “journeyPlanner”:”melbtrans”,
          “destinations”:[
            {
              “fixed”:true,”class”:”work”,”weight”:0.8,
              “location”:{“address”:”19 Bourke Street, Melbourne, VIC 3000”,”lat”:”#{qGeocodeDestination}.lat”,”lon”:”#{qGeocodeDestination}.lon”},
              “modes”:[{“form”:”transit”,”max”:{“time”:2400}}]
            }
          ]
        }
      }
    ]
</code></pre></p>
<p><ul><li>Here we can see that we have defined three queries, named <code>qGeocodeOrigin</code>, <code>qGeocodeDestination</code>, <code>qScore</code>.</li></p>
<p><li>The first two do not define any dependencies, but the thirds does.</p>
<p><ul><li><code>qryq</code> will figure out that it needs to execute <code>qScore</code>, only when both <code>qGeocodeOrigin</code> and <code>qGeocodeDestination</code> have completed, so that it may use its results.</li>
</ul></li></p>
<p><li>The <code>qScore</code> invokes the function that handles the <code>score</code> API, and passes in a set of presently known values through <code>qry</code></li></p>
<p><li>The <code>qry</code> for <code>qScore</code>also passes in variables, whose values are not known at the time of making the query.</p>
<p><ul><li>An example: <code>“lon”:”#{qGeocodeOrigin}.lon”</code>.</li></p>
<p><li><code>qryq</code> will substitute the computed values for these variables when it is this query&#8217;s turn to execute.</li>
</ul></li>
</ul><h2 id="more-details">More Details</h2></p>
<p><p><a href="https://github.com/bguiz/qryq/blob/master/doco/present/markdown/present.md" title="qryq presentation" target="_blank">A full presentation on <code>qryq</code></a></p></p>
<p><p><code>qryq</code> is a project that has spun off from another project of mine, <a href="https://github.com/bguiz/walkre" title="walkre" target="_blank"><code>walkre</code></a>. Most of the development of <code>qryq</code> has thus far occurred in <code>walkre</code>, and currently the <code>qryq</code> repository is merely a <em>snapshot</em> of the <code>qryq</code> code used in <code>walkre</code>. A proper extraction is on the plans.</p></p>
<p><h2 id="open-source">Open Source</h2></p>
<p><p><code>qryq</code> is open source, and you can <a href="https://github.com/bguiz/qryq" title="qryq source code on github" target="_blank">find it on github</a></p></p>
<div id="ap_listener_added"></div></span></div><div id="page-footer" class="page-footer"><div class="share-buttons__share-buttons___3c-nq"><ul class="share-buttons__share-items___35ozf"><li class="share-buttons__share-item___10u_7"><a href="mailto:?subject=qryq - Brendan Graetz&amp;amp;body=http://blog.bguiz.com/2013/07/05/qryq" class="share-buttons__share-button-email___3ktqW share-buttons__share-button___36_MO"><span class="fa fa-envelope"></span><div class="share-count"> </div></a></li><li class="share-buttons__share-item___10u_7"><div role="button" tabindex="0" class="SocialMediaShareButton SocialMediaShareButton--facebook share-buttons__share-button-facebook___uSKF_ share-buttons__share-button___36_MO"><span class="fa fa-facebook"></span><div class="SocialMediaShareCount share-count"><span class="share-count-inner">&nbsp;</span></div></div></li><li class="share-buttons__share-item___10u_7"><div role="button" tabindex="0" class="SocialMediaShareButton SocialMediaShareButton--twitter share-buttons__share-button-twitter___3vZWS share-buttons__share-button___36_MO"><span class="fa fa-twitter"></span><div class="share-count"> </div></div></li><li class="share-buttons__share-item___10u_7"><div role="button" tabindex="0" class="SocialMediaShareButton SocialMediaShareButton--googlePlus share-buttons__share-button-google-plus___1OUuW share-buttons__share-button___36_MO"><span class="fa fa-google-plus"></span><div class="SocialMediaShareCount share-count"><span class="share-count-inner">&nbsp;</span></div></div></li><li class="share-buttons__share-item___10u_7"><div role="button" tabindex="0" class="SocialMediaShareButton SocialMediaShareButton--linkedin share-buttons__share-button-linkedin___2EwnF share-buttons__share-button___36_MO"><span class="fa fa-linkedin"></span><div class="SocialMediaShareCount share-count"><span class="share-count-inner">&nbsp;</span></div></div></li></ul></div><div><span>Tagged in:</span><ul class="post-tags__tags-list___3m4XD"><li class="post-tags__tags-item___3xlEk"><a href="/tags/http">http</a></li><li class="post-tags__tags-item___3xlEk"><a href="/tags/rest">rest</a></li><li class="post-tags__tags-item___3xlEk"><a href="/tags/javascript">javascript</a></li><li class="post-tags__tags-item___3xlEk"><a href="/tags/nodejs">nodejs</a></li><li class="post-tags__tags-item___3xlEk"><a href="/tags/expressjs">expressjs</a></li><li class="post-tags__tags-item___3xlEk"><a href="/tags/q">q</a></li><li class="post-tags__tags-item___3xlEk"><a href="/tags/open source">open source</a></li><li class="post-tags__tags-item___3xlEk"><a href="/tags/blog">blog</a></li><li class="post-tags__tags-item___3xlEk"><a href="/tags/optimisation">optimisation</a></li></ul></div><div><a href="https://github.com/bguiz/blog.bguiz.com/blob/develop/src/documents/tumblrposts/2013-07-05-qryq.html" target="_blank">Edit this content</a></div><div><div title="qryq"><div id="disqus_thread"></div><noscript><span>Please enable JavaScript to view the<a href="http://disqus.com/?ref_noscript">comments powered by Disqus.</a></span></noscript><a href="http://disqus.com" class="dsq-brlink">blog comments powered by<span class="logo-disqus">Disqus</span></a></div></div></div></div></div><div id="footprofile" class="foot-profile__footprofile___23hoj"><div class="foot-profile__footprofile-logo___3JA-e"><img src="/images/logo-100px.png" alt="Brendan Graetz"/></div><div class="foot-profile__footprofile-links___3U9KR"><ul class="foot-profile__footer-links___2SYBF"><li class="foot-profile__footer-item___22yBd"><a title="Brendan Graetz" href="/"><span class="fa fa-home foot-profile__footer-link-icon___11CDs"></span><span class="foot-profile__footer-link-text___1slED">Brendan Graetz</span></a></li><li class="foot-profile__footer-item___22yBd"><a title="Archives" href="/archives"><span class="fa fa-files-o foot-profile__footer-link-icon___11CDs"></span><span class="foot-profile__footer-link-text___1slED">Archives</span></a></li><li class="foot-profile__footer-item___22yBd"><a title="Presentations" href="/presentations"><span class="fa fa-television foot-profile__footer-link-icon___11CDs"></span><span class="foot-profile__footer-link-text___1slED">Presentations</span></a></li><li class="foot-profile__footer-item___22yBd"><a title="Books" href="/books"><span class="fa fa-book foot-profile__footer-link-icon___11CDs"></span><span class="foot-profile__footer-link-text___1slED">Books</span></a></li><li class="foot-profile__footer-item___22yBd"><a href="https://twitter.com/bguiz" title="@bguiz on Twitter"><span class="fa fa-twitter foot-profile__footer-link-icon___11CDs"></span><span class="foot-profile__footer-link-text___1slED">@bguiz</span></a></li><li class="foot-profile__footer-item___22yBd"><a href="https://github.com/bguiz" title="bguiz on github"><span class="fa fa-github foot-profile__footer-link-icon___11CDs"></span><span class="foot-profile__footer-link-text___1slED">Github</span></a></li><li class="foot-profile__footer-item___22yBd"><a href="http://stackoverflow.com/users/194982/bguiz" title="bguiz on stackoverflow"><span class="fa fa-stack-overflow foot-profile__footer-link-icon___11CDs"></span><span class="foot-profile__footer-link-text___1slED">Stackoverflow</span></a></li><li class="foot-profile__footer-item___22yBd"><a href="http://linkedin.com/in/brendangraetz/" title="Brendan Graetz on LinkedIn"><span class="fa fa-linkedin foot-profile__footer-link-icon___11CDs"></span><span class="foot-profile__footer-link-text___1slED">LinkedIn</span></a></li><li class="foot-profile__footer-item___22yBd"><a href="http://reddit.com/u/bguiz" title="/u/bguiz on Reddit"><span class="fa fa-reddit-alien foot-profile__footer-link-icon___11CDs"></span><span class="foot-profile__footer-link-text___1slED">Reddit</span></a></li><li class="foot-profile__footer-item___22yBd"><a href="https://plus.google.com/112370545733832378774?rel=author" title="@bguiz on Google+"><span class="fa fa-google-plus foot-profile__footer-link-icon___11CDs"></span><span class="foot-profile__footer-link-text___1slED">+bguiz.com</span></a></li></ul></div><div class="foot-profile__clear___1vNYP"></div></div><div id="footbar" class="footbar__footbar___2dhrz"><p class="footbar__footbar-text___Rc4dT">Copyright © 2008-present Brendan Graetz</p></div></div>
    </div>
    
<link rel="stylesheet" type="text/css" href="/app.css">
<link rel="stylesheet" type="text/css" href="/3rd-party/font-awesome/css/font-awesome.min.css">
<link rel="stylesheet" type="text/css" href="/3rd-party/highlight-js/css/dracula.css">
<script type="text/javascript" src="/bundle.js"></script>
  </body>
</html>